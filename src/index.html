<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The web site of a-moseman</title>
    <link href="./style.css" rel="stylesheet" type="text/css" media="all">
  </head>

  <body>

    <div class="main">

      <div class="top_stack">

        <div class="left_bar">
            <a href="https://github.com/a-moseman"><img class="logo" src="./resources/github_mark_white.svg"></a>
            <a href="https://www.linkedin.com/in/andrew-moseman-b78b34191/"><img class="logo" src="./resources/linkedin.svg"></a>
            <a href="https://bsky.app/profile/a-moseman.neocities.org">
              <img class="logo" src="./resources/bluesky.svg" />
              </svg>
            </a>
        </div>

        <div class="center_bar">
          <div class="title_section">
            <div class="title">Andrew Moseman</div>
            <div class="description"></div>

              <div class="blog">

              </div>
          </div>


        </div>

        <div class="right_bar">
              <a class="link" href="https://a-moseman.github.io/">Portfolio</a>
        </div>

      </div>

      <div class="bottom_stack">
        <img src="./resources/neocities.png">
      </div>

    </div>

  </body>
</html>

<script>
  // DOM elements
  const description = document.querySelector(".description");
  const blog = document.querySelector(".blog");

  fetch("https://a-moseman.neocities.org/resources/descriptions.txt")
    .then(file => file.text())
    .then(text => {
      const descriptions = text.trim().split("\n");
      const choice = Math.floor(Math.random() * (descriptions.length));
      const chosen = document.createElement("i");
      chosen.innerText = descriptions[choice];
      description.appendChild(chosen);
    });

  fetch("https://a-moseman.neocities.org/resources/blog/index.txt")
    .then(file => file.text())
    .then(text => {
      const posts = parseInt(text.trim());
      for (let i = 1; i <= posts; i++) {
        fetch(`https://a-moseman.neocities.org/resources/blog/${i}.txt`)
          .then(postFile => postFile.text())
          .then(postText => {
            const post = document.createElement("div");

            const postLines = postText.trim().split("\n");

            const postTitle = document.createElement("div");
            const postDate = document.createElement("div");
            postTitle.className = "blog_post_title";
            postDate.className = "blog_post_date";
            postTitle.textContent = postLines[0];
            postDate.textContent = postLines[1];
            post.appendChild(postTitle);
            post.appendChild(postDate);

            for (let j = 2; j < postLines.length; j++) {
              let paragraphText = postLines[j];
              if (paragraphText === "") {
                continue;
              }
              const postParagraph = document.createElement("p");
              postParagraph.className = "blog_post_paragraph";
              paragraphText = " &emsp; " + paragraphText; // start each paragraph with a tab
              postParagraph.textContent = paragraphText;
              post.appendChild(postParagraph);
            }

            blog.appendChild(post);
          });
      }
  });
</script>
